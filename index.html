<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Personal dashboard for organizing and managing your favorite links">
    <meta name="theme-color" content="#ffffff">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; style-src 'self' 'unsafe-inline' https:; script-src 'self' https:; img-src 'self' https: data:;">
    <title>Dashboard</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Dashboard</h1>
            <div class="header-actions">
                <!-- Theme/Appearance Group -->
                <button id="themeColorBtn" title="Change Theme Color">
                    <i class="fas fa-palette"></i>
                </button>
                <button id="darkModeBtn" title="Toggle Dark Mode">
                    <i class="fas fa-moon"></i>
                </button>
                <!-- User Settings -->
                <button id="settingsBtn" title="Change Username">
                    <i class="fas fa-user-edit"></i>
                </button>
                <!-- Data Management Group -->
                <button id="importBtn" title="Import All Data">
                    <i class="fas fa-file-arrow-down"></i>
                </button>
                <button id="exportAllBtn" title="Export All Data">
                    <i class="fas fa-file-export"></i>
                </button>
                <button id="backupSettingsBtn" title="Backup Settings">
                    <i class="fas fa-cogs"></i>
                </button>
                <!-- Features -->
                <button id="todoListBtn" title="To-do List">
                    <i class="fas fa-tasks"></i>
                </button>
                <button id="retirementTimerBtn" title="Retirement Timer">
                    <i class="fas fa-hourglass-half"></i>
                </button>
                <!-- Moved undo to end since it's often disabled -->
                <button id="undoBtn" title="Undo">
                    <i class="fas fa-undo"></i>
                </button>
                <!-- Help -->
                <button id="helpBtn" title="Help" aria-label="Help and Documentation">
                    <i class="fas fa-question-circle"></i>
                </button>
                <!-- Clear Storage -->
                <button id="clearStorageBtn" title="Clear Storage" aria-label="Clear Local Storage">
                    <i class="fas fa-trash-alt"></i>
                </button>
            </div>
        </div>
    </header>

    <main role="main" aria-label="Dashboard Content">
        <div class="form-container" role="form" aria-label="Add Content Forms">
            <form id="addSectionForm">
                <h3 class="form-title">Add New Section</h3>
                <input type="text" id="newSectionName" placeholder="Section name" required 
                       aria-label="New Section Name" pattern="[A-Za-z0-9\s\-_]+" 
                       title="Only letters, numbers, spaces, hyphens and underscores allowed">
                <button type="submit">Add Section</button>
            </form>

            <form id="addLinkForm">
                <h3 class="form-title">Add New Link</h3>
                <select id="existingSections" required>
                    <option value="">Select section</option>
                </select>
                <input type="text" id="linkName" placeholder="Link name" required
                       aria-label="Link Name" pattern="[A-Za-z0-9\s\-_]+"
                       title="Only letters, numbers, spaces, hyphens and underscores allowed">
                <input type="url" id="linkUrl" placeholder="Link URL" required
                       aria-label="Link URL" pattern="https?://.+"
                       title="URL must start with http:// or https://">
                <button type="submit">Add Link</button>
            </form>
        </div>

        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search links..." 
                   aria-label="Search Links" role="searchbox">
            <button type="button" id="clearSearchBtn" aria-label="Clear search">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div id="favoritesSection" class="section">
            <h2>Favorites</h2>
            <div id="favoritesList" class="link-list"></div>
        </div>

        <!-- Retirement Timer Section (Hidden by default) -->
        <div id="retirementTimerContainer" class="section" style="display: none;">
            <div class="section-header">
                <h2 class="section-title">Retirement Countdown</h2>
                <div class="section-actions">
                    <button id="retirementSettingsBtn" class="section-btn" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button id="retirementToggleBtn" class="section-btn" title="Enable/Disable Timer">
                        <i class="fas fa-toggle-off"></i>
                    </button>
                </div>
            </div>
            <div class="retirement-content">
                <div id="retirementTimer" class="timer-display">Timer loading...</div>
            </div>
        </div>

        <div id="linkList"></div>
    </main>

    <input type="file" id="importInput" style="display: none;" accept=".json,.html">

    <!-- Custom Modal Dialog -->
    <div id="customModal" class="modal" style="display: none;" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
        <div class="modal-content" role="document">
            <h3 id="modalTitle" class="modal-title">Modal Title</h3>
            <p id="modalMessage" class="modal-message">Modal content goes here.</p>
            <div class="modal-buttons">
                <button id="modalNo" class="modal-btn" autofocus>No</button>
                <button id="modalYes" class="modal-btn primary">Yes</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>
    <script src="logger.js"></script>
    <script src="theme.js"></script>
    <script src="export-utils.js"></script>
    <script src="keyboard-nav.js"></script>
    <script src="auto-backup.js"></script>
    <script src="input-validator.js"></script>
    <script src="error-handler.js"></script>
    <script src="modal-manager.js"></script>
    <script src="script.js"></script>
    <script src="retirement-timer.js"></script>
    <script>
        // Register service worker for offline functionality
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(registration => {
                    console.log('ServiceWorker registration successful');
                })
                .catch(err => {
                    console.error('ServiceWorker registration failed:', err);
                });
        }
    </script>
</body>
</html>
